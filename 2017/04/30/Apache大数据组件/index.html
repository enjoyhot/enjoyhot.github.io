<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    
    <title>Apache大数据组件 | ENJOYHOT</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="概述大数据的处理模式大体可以分为批处理（也可称为离线计算）、流式计算（数据实时性高）、在线处理（即时响应）和交互式分析（允许分钟级）四种。

大数据的4V属性数量（Volume），多样性（Variety），速度（Velocity），真实性（Veracity）

HDFS组成组件">
<meta property="og:type" content="article">
<meta property="og:title" content="Apache大数据组件">
<meta property="og:url" content="http://enjoyhot.github.io/2017/04/30/Apache大数据组件/index.html">
<meta property="og:site_name" content="ENJOYHOT">
<meta property="og:description" content="概述大数据的处理模式大体可以分为批处理（也可称为离线计算）、流式计算（数据实时性高）、在线处理（即时响应）和交互式分析（允许分钟级）四种。

大数据的4V属性数量（Volume），多样性（Variety），速度（Velocity），真实性（Veracity）

HDFS组成组件">
<meta property="og:image" content="http://www.processon.com/chart_image/535371590cf2bb589c5e2391.png">
<meta property="og:updated_time" content="2017-04-30T09:53:32.592Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Apache大数据组件">
<meta name="twitter:description" content="概述大数据的处理模式大体可以分为批处理（也可称为离线计算）、流式计算（数据实时性高）、在线处理（即时响应）和交互式分析（允许分钟级）四种。

大数据的4V属性数量（Volume），多样性（Variety），速度（Velocity），真实性（Veracity）

HDFS组成组件">
<meta name="twitter:image" content="http://www.processon.com/chart_image/535371590cf2bb589c5e2391.png">
<link rel="publisher" href="111736291216286617217">
    

    
        <link rel="alternate" href="atom.xml" title="ENJOYHOT" type="application/atom+xml" />
    

    
        <link rel="icon" href="/css/images/logo.png" />
    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/open-sans/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/2.1.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">
    
    
    
    
        <script>
var _hmt = _hmt || [];
(function() {
    var hm = document.createElement("script");
    hm.src = "//hm.baidu.com/hm.js?715efc417137bb8b58f6b4edfa378ccd";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
})();
</script>

    


</head>

<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">ENJOYHOT</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/.">Home</a>
                
                    <a class="main-nav-link" href="/archives">Archives</a>
                
                    <a class="main-nav-link" href="/categories">Categories</a>
                
                    <a class="main-nav-link" href="/tags">Tags</a>
                
                    <a class="main-nav-link" href="/about">About</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="/css/images/avatar.png" />
                            <i class="fa fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/.">Home</a></td>
                
                    <td><a class="main-nav-link" href="/archives">Archives</a></td>
                
                    <td><a class="main-nav-link" href="/categories">Categories</a></td>
                
                    <td><a class="main-nav-link" href="/tags">Tags</a></td>
                
                    <td><a class="main-nav-link" href="/about">About</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
                

<aside id="profile">
    <div class="inner profile-inner">
        <div class="base-info profile-block">
            <img id="avatar" src="/css/images/avatar.png" />
            <h2 id="name">ENJOYHOT</h2>
            <h3 id="title">D</h3>
            <span id="location"><i class="fa fa-map-marker"></i>Guangzhou, China</span>
            <a id="follow" target="_blank" href="https://github.com/enjoyhot/">FOLLOW</a>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                42
                <span>posts</span>
            </div>
            <div class="article-info-block">
                35
                <span>tags</span>
            </div>
        </div>
        
        <div class="profile-block social-links">
            <table>
                <tr>
                    
                    
                    <td>
                        <a href="https://github.com/enjoyhot" target="_blank" title="github" class=tooltip>
                            <i class="fa fa-github"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="http://weibo.com/gugugujiawei" target="_blank" title="weibo" class=tooltip>
                            <i class="fa fa-weibo"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="mailto:gugugujiawei@gmail.com" target="_blank" title="envelope-o" class=tooltip>
                            <i class="fa fa-envelope-o"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="https://www.douban.com/people/75493036/" target="_blank" title="user-md" class=tooltip>
                            <i class="fa fa-user-md"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/atom.xml" target="_blank" title="rss" class=tooltip>
                            <i class="fa fa-rss"></i>
                        </a>
                    </td>
                    
                </tr>
            </table>
        </div>
        
    </div>
</aside>

            
            <section id="main"><article id="post-Apache大数据组件" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
            Apache大数据组件
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2017/04/30/Apache大数据组件/">
            <time datetime="2017-04-30T09:24:08.000Z" itemprop="datePublished">2017-04-30</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/分布式/">分布式</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Apache/">Apache</a>, <a class="tag-link" href="/tags/分布式/">分布式</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
                <div id="toc" class="toc-article">
                <strong class="toc-title">Catalogue</strong>
                    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#概述"><span class="toc-number">1.</span> <span class="toc-text">概述</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#HDFS"><span class="toc-number">2.</span> <span class="toc-text">HDFS</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#组成组件"><span class="toc-number">2.1.</span> <span class="toc-text">组成组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#不同版本的比较"><span class="toc-number">2.2.</span> <span class="toc-text">不同版本的比较</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Hadoop-1-x"><span class="toc-number">2.2.1.</span> <span class="toc-text">Hadoop 1.x</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#单点故障问题"><span class="toc-number">2.2.1.1.</span> <span class="toc-text">单点故障问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SecondaryNameNode"><span class="toc-number">2.2.1.2.</span> <span class="toc-text">SecondaryNameNode</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Hadoop-2-x"><span class="toc-number">2.2.2.</span> <span class="toc-text">Hadoop 2.x</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#HA"><span class="toc-number">2.2.2.1.</span> <span class="toc-text">HA</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HDFS文件读写"><span class="toc-number">2.3.</span> <span class="toc-text">HDFS文件读写</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#hdfs文件读取过程"><span class="toc-number">2.3.1.</span> <span class="toc-text">hdfs文件读取过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#hdfs文件写入过程"><span class="toc-number">2.3.2.</span> <span class="toc-text">hdfs文件写入过程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#不适合的场景"><span class="toc-number">2.4.</span> <span class="toc-text">不适合的场景</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Kafka"><span class="toc-number">3.</span> <span class="toc-text">Kafka</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#基本概念"><span class="toc-number">3.1.</span> <span class="toc-text">基本概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HA-1"><span class="toc-number">3.2.</span> <span class="toc-text">HA</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#应用场景"><span class="toc-number">3.3.</span> <span class="toc-text">应用场景</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#消费模式"><span class="toc-number">3.4.</span> <span class="toc-text">消费模式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#消息顺序性"><span class="toc-number">3.5.</span> <span class="toc-text">消息顺序性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Partition顺序性"><span class="toc-number">3.5.1.</span> <span class="toc-text">Partition顺序性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Partition-Offset"><span class="toc-number">3.5.2.</span> <span class="toc-text">Partition Offset</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Rebalance"><span class="toc-number">3.6.</span> <span class="toc-text">Rebalance</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Push-vs-Pull"><span class="toc-number">3.7.</span> <span class="toc-text">Push vs Pull</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#客户端API"><span class="toc-number">3.8.</span> <span class="toc-text">客户端API</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#磁盘存储特点"><span class="toc-number">3.9.</span> <span class="toc-text">磁盘存储特点</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#zookeeper"><span class="toc-number">4.</span> <span class="toc-text">zookeeper</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#配置"><span class="toc-number">4.1.</span> <span class="toc-text">配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数据模型"><span class="toc-number">4.2.</span> <span class="toc-text">数据模型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#zookeeper结构"><span class="toc-number">4.3.</span> <span class="toc-text">zookeeper结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#选取Leader的过程"><span class="toc-number">4.4.</span> <span class="toc-text">选取Leader的过程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#应用"><span class="toc-number">4.5.</span> <span class="toc-text">应用</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#HBase"><span class="toc-number">5.</span> <span class="toc-text">HBase</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#HBase主要优点"><span class="toc-number">5.1.</span> <span class="toc-text">HBase主要优点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#列式数据库特点"><span class="toc-number">5.2.</span> <span class="toc-text">列式数据库特点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#物理模型"><span class="toc-number">5.3.</span> <span class="toc-text">物理模型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HBase的compact"><span class="toc-number">5.4.</span> <span class="toc-text">HBase的compact</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#读写性能讨论"><span class="toc-number">5.5.</span> <span class="toc-text">读写性能讨论</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#与zookeeper的关系"><span class="toc-number">5.6.</span> <span class="toc-text">与zookeeper的关系</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#调优"><span class="toc-number">5.7.</span> <span class="toc-text">调优</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#rowkey设计原则"><span class="toc-number">5.8.</span> <span class="toc-text">rowkey设计原则</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#hbase-shell操作"><span class="toc-number">5.9.</span> <span class="toc-text">hbase shell操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#delete操作"><span class="toc-number">5.9.1.</span> <span class="toc-text">delete操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#创建表"><span class="toc-number">5.9.2.</span> <span class="toc-text">创建表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#添加数据"><span class="toc-number">5.9.3.</span> <span class="toc-text">添加数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#查找数据"><span class="toc-number">5.9.4.</span> <span class="toc-text">查找数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#扫描表数据"><span class="toc-number">5.9.5.</span> <span class="toc-text">扫描表数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除表"><span class="toc-number">5.9.6.</span> <span class="toc-text">删除表</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Lambda架构"><span class="toc-number">6.</span> <span class="toc-text">Lambda架构</span></a></li></ol>
                </div>
            
            <h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><p>大数据的处理模式大体可以分为批处理（也可称为离线计算）、流式计算（数据实时性高）、在线处理（即时响应）和交互式分析（允许分钟级）四种。</p>
<ul>
<li>大数据的4V属性<br>数量（Volume），多样性（Variety），速度（Velocity），真实性（Veracity）</li>
</ul>
<h1 id="HDFS"><a href="#HDFS" class="headerlink" title="HDFS"></a>HDFS</h1><h2 id="组成组件"><a href="#组成组件" class="headerlink" title="组成组件"></a>组成组件</h2><a id="more"></a>
<p>HDFS是以master/slave模式运行的，其中NameNode、SecondaryNameNode 通常运行在master节点，DataNode运行slave节点。</p>
<ul>
<li>NameNode<br>  管理文件系统的Namespace，维护文件系统树以及树中所有文件和文件夹的元数据（metadata）；处理客户端请求。</li>
<li>SecondaryNameNode<br>相当于一个Checkpoint Node，监控HDFS状态的辅助后台程序，与NameNode进行通信，以便定期地保存HDFS元数据的快照。</li>
<li>DataNode<br>文件系统的工作节点，当需要通过客户端读/写某个数据时，先由NameNode告诉客户端去哪个DataNode进行具体的读/写操作，然后，客户端直接与这个DataNode服务器上的后台程序进行通信，并且对相关的数据块进行读/写操作。</li>
</ul>
<h2 id="不同版本的比较"><a href="#不同版本的比较" class="headerlink" title="不同版本的比较"></a>不同版本的比较</h2><h3 id="Hadoop-1-x"><a href="#Hadoop-1-x" class="headerlink" title="Hadoop 1.x"></a>Hadoop 1.x</h3><h4 id="单点故障问题"><a href="#单点故障问题" class="headerlink" title="单点故障问题"></a>单点故障问题</h4><p>由于只有一个NameNode，因此会出现单点故障问题。有多种方式可以解决：</p>
<ul>
<li>将hadoop元数据写入到本地文件系统的同时再实时同步到一个远程挂载的网络文件系统（NFS）（在2.X中同样适用）；</li>
<li>运行一个secondaryNameNode进行冷备份，它的作用是与NameNode进行交互，定期将编辑日志文件(<strong>edit logs</strong>)合并为命名空间镜像，当NameNode发生故障时它会通过自己合并的命名空间镜像副本来恢复。<ul>
<li>secondaryNameNode保存的状态总是滞后于NameNode，所以这种方式难免会导致丢失部分数据。</li>
<li>NameNode中存放的元信息文件是fsimage，操作期间所有对元信息的操作都保存在内存中并被持久化到另一个文件edit logs中。edit logs文件和fsimage文件会被SecondaryNameNode周期性的合并。<br>注：<a href="http://blog.csdn.net/xh16319/article/details/31375197" target="_blank" rel="external">http://blog.csdn.net/xh16319/article/details/31375197</a><ul>
<li>fsimage ：保存的是上个检查点的HDFS的元信息；</li>
<li>edits ：保存的是从上个检查点开始发生的HDFS元信息状态改变信息。</li>
</ul>
</li>
<li><strong>按照HDFS的设计，NameNode不会主动发起任何请求，只会被动接受来自客户端或DataNode的请求。</strong></li>
</ul>
</li>
</ul>
<h4 id="SecondaryNameNode"><a href="#SecondaryNameNode" class="headerlink" title="SecondaryNameNode"></a>SecondaryNameNode</h4><p><strong>合并流程：</strong></p>
<ul>
<li>首先，secondaryNameNode定时到NameNode去获取edit logs，并更新到fsimage上。[笔者注：Secondary NameNode自己的fsimage]</li>
<li>一旦它有了新的fsimage文件，它将其拷贝回NameNode中。</li>
<li>NameNode在下次重启时会使用这个新的fsimage文件，从而减少重启的时间。</li>
</ul>
<center><br><img src="http://www.processon.com/chart_image/535371590cf2bb589c5e2391.png" alt="此处输入图片的描述"><br></center>

<h3 id="Hadoop-2-x"><a href="#Hadoop-2-x" class="headerlink" title="Hadoop 2.x"></a>Hadoop 2.x</h3><h4 id="HA"><a href="#HA" class="headerlink" title="HA"></a>HA</h4><p>在2.X中，HDFS的变化，主要体现在增强了NameNode的水平扩展及可用性，可以同时部署多个NameNode，这些NameNodes之间是相互独立，也就是说他们不需要相互协调，DataNode同时在所有NameNodes注册，做为他们共有的存储节点，并定时向所有的这些NameNodes发送心跳块使用情况的报告，并处理所有NameNodes向其发送的指令。<br>多个NameNode之间共享数据，可以通过Nnetwork File System或者Quorum Journal Node。</p>
<ul>
<li>NFS方案；</li>
<li>基于Paxos的QJM(Quorum Journal Node)方案，它的基本原理就是用2N+1台JournalNode存储EditLog，每次写数据操作有大多数（&gt;=N+1）返回成功时即认为该次写成功。在HDFS运行时，同一时刻只有一个NameNode处于active状态，另一个处于standby状态。standbyNamenode作为“休眠方”，只进行数据同步，维护着数据状态，随时准备切换。</li>
</ul>
<p><strong>附：HDFS中的沟通协议</strong></p>
<center><br><img src="http://www.ibigdata.io/wp-content/uploads/2016/08/HadoopProtocols.jpg" alt="此处输入图片的描述"><br></center>


<h2 id="HDFS文件读写"><a href="#HDFS文件读写" class="headerlink" title="HDFS文件读写"></a>HDFS文件读写</h2><h3 id="hdfs文件读取过程"><a href="#hdfs文件读取过程" class="headerlink" title="hdfs文件读取过程"></a>hdfs文件读取过程</h3><ul>
<li>客户端发起读请求；</li>
<li>客户端与NameNode得到文件的块及位置信息列表；</li>
<li>客户端直接和DataNoie交互读取数据；</li>
<li>读取完成关闭连接；</li>
</ul>
<h3 id="hdfs文件写入过程"><a href="#hdfs文件写入过程" class="headerlink" title="hdfs文件写入过程"></a>hdfs文件写入过程</h3><p>hdfs有一个DistributedFileSystem实例，客户端通过调用这个实例的create()方法就可以创建文件：</p>
<ul>
<li>DistributedFileSystem会发送给NameNode一个RPC调用，在文件系统的命名空间创建一个新文件，在创建文件前NameNode会做一些检查，如文件是否存在，客户端是否有创建权限等，若检查通过，NameNode会为创建文件写一条记录到本地磁盘的EditLog，若不通过会向客户端抛出IOException。创建成功之后DistributedFileSystem会返回一个FSDataOutputStream对象，客户端由此开始写入数据。</li>
<li>客户端在向NameNode请求之前先写入文件数据到本地文件系统的一个临时文件；</li>
<li>待临时文件达到<strong>块大小</strong>时开始向NameNode请求DataNode信息；</li>
<li>NameNode在文件系统中创建文件并<strong>返回给客户端</strong>一个数据块及其对应DataNode的地址列表（列表中包含副本存放的地址）；</li>
<li>客户端通过上一步得到的信息把创建临时文件块flush到列表中的第一个DataNode；</li>
<li>当文件关闭，NameNode会提交这次文件创建，此时，文件在文件系统中可见。</li>
</ul>
<h2 id="不适合的场景"><a href="#不适合的场景" class="headerlink" title="不适合的场景"></a>不适合的场景</h2><ul>
<li>大量小文件：文件的元数据(命名空间信息，块信息等)都存储在NameNode内存中，大量小文件会占用大量内存。</li>
<li>低延迟数据访问：hdfs是专门针对高数据吞吐量而设计的</li>
<li>多用户写入，任意修改文件，HDFS设计上是为了适合一次写入，多次使用</li>
</ul>
<h1 id="Kafka"><a href="#Kafka" class="headerlink" title="Kafka"></a>Kafka</h1><h2 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h2><ol>
<li>topic：消息存放的目录即主题</li>
<li>Producer：生产消息到topic的一方</li>
<li>Consumer：订阅topic消费消息的一方</li>
<li>Broker：Kafka的服务实例就是一个broker</li>
</ol>
<h2 id="HA-1"><a href="#HA-1" class="headerlink" title="HA"></a>HA</h2><ul>
<li>Partition分布在集群的每一台server上，而每一个Partition在集群中都可以有多个备份，这个备份数量是可配置的。</li>
<li>每个Partition都有一个leader server，而其他备份的server都称为followers，只有leader服务器才会处理这个Partition上所有的读写请求，而其它followers则被动地复制leader上的数据。如果一个leader挂掉了，followers中的一个服务器则会自动升级为leader。同一个机器可以有多个Partition。</li>
</ul>
<h2 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h2><ul>
<li><p>Kafka基本应用图如下所示：</p>
<center><br><img src="http://img.blog.csdn.net/20170430174922678?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VndWd1amlhd2Vp/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="此处输入图片的描述"><br></center>
</li>
<li><p>使用场景<br>负责消费Partition的每个消费者都是一个消费进程，而且消费者本身也可以是多线程的应用程序，因为一个Partition只能属于一个消费者线程，所以存在如下几种不同的场景：</p>
<ul>
<li>线程数量多于Partition的数量，有部分线程无法消费该topic下任何一条消息</li>
<li>线程数量少于Partition的数量，有一些线程会消费多个Partition的数据(这是最好的场景)</li>
<li>线程数量等于Partition的数量，则正好一个线程消费一个Partition的数据</li>
</ul>
</li>
</ul>
<h2 id="消费模式"><a href="#消费模式" class="headerlink" title="消费模式"></a>消费模式</h2><p>消息传递通常由两种模式，queuing（队列）和publish-subscribe （发布-订阅）</p>
<ul>
<li>queuing: 每个Consumer从消息队列中取走一个消息</li>
<li>pub-scrib: 消息被广播到每个Consumer</li>
</ul>
<center><br><img src="http://img.blog.csdn.net/20170430175031635?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VndWd1amlhd2Vp/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="此处输入图片的描述"><br></center>

<p>实际上，kafka通过提供了一个对Consumer的抽象来同时实现这两种模式——ConsumerGroup。</p>
<blockquote>
<p>当同一个 Topic （一个producer一个topic）的 consumer 配置 group.id 相同时，即为 queue模式。否则用不同的group.id时，则以public-subscribe模式工作。</p>
</blockquote>
<h2 id="消息顺序性"><a href="#消息顺序性" class="headerlink" title="消息顺序性"></a>消息顺序性</h2><h3 id="Partition顺序性"><a href="#Partition顺序性" class="headerlink" title="Partition顺序性"></a>Partition顺序性</h3><p>消息在一个Partition中的顺序是有序的，但是Kafka只保证消息在一个Partition中有序，如果要想使整个topic中的消息有序，那么一个topic仅设置一个Partition即可，或者在producer端控制每个partition消息应有的顺序。</p>
<h3 id="Partition-Offset"><a href="#Partition-Offset" class="headerlink" title="Partition Offset"></a>Partition Offset</h3><ul>
<li>生产者的提交日志采用递增的offset连同消息内容一起写入到本地日志文件，生产者客户端本身不需要保存offset相关的状态。</li>
<li>消费者进程则要保存消费消息的offset，因此它是有状态的，这样消费者才能将消息的消费进度保存到ZK或者其他存储系统中。在顺序读取过程中，通过offset记录每条日志对于每个组的当前消费进度。</li>
</ul>
<h2 id="Rebalance"><a href="#Rebalance" class="headerlink" title="Rebalance"></a>Rebalance</h2><ul>
<li>一个消费组有多个消费者，因此消费组需要维护所有的消费者，如果一个消费者宕掉了，分配给这个消费者的Partition需要被重新分配给相同组的其他消费者；</li>
<li>如果一个消费者加入了同一个组，之前分配给其他消费组的Partition需要分配给新加入的消费者。<ul>
<li>实际上一旦有消费者加入或退出消费组，导致消费组成员列表发生变化，即使Kafka集群的Partition没有变化，消费组中所有的消费者也都要触发重新rebalance的工作。当然如果集群的Partition发生变化，即使消费组成员没有变化，所有的消费者也都要重新rebalance。</li>
<li><strong>消费者消费消息</strong>时需要<strong>定时</strong>地将最新的消费进度保存到ZooKeeper中，当发生rebalance时，新的消费者拥有的新的Partition都可以从ZooKeeper中读取出来并恢复到最近的状态。<center><br><img src="http://img.blog.csdn.net/20170430175114695?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ3VndWd1amlhd2Vp/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="此处输入图片的描述"><br></center>

</li>
</ul>
</li>
</ul>
<h2 id="Push-vs-Pull"><a href="#Push-vs-Pull" class="headerlink" title="Push vs Pull"></a>Push vs Pull</h2><p>kafka的consumer之所以没有采用push模式，是因为push模式很难适应消费者速率不同的消费者而且很难实现消息的回放功能，因为消息发送速率是由broker决定的。push模式的目标就是尽可能以最快速度传递消息，但是这样很容易造成consumer来不及处理消息，典型的表现就是拒绝服务以及网络拥塞，而pull模式则可以根据consumer的消费能力以适当的速率消费message。<br><a href="http://kafka.apache.org/documentation.html#design_pull" target="_blank" rel="external">http://kafka.apache.org/documentation.html#design_pull</a></p>
<h2 id="客户端API"><a href="#客户端API" class="headerlink" title="客户端API"></a>客户端API</h2><blockquote>
<p>在0.9.0版本中：This new unified consumer API removes the distinction between the 0.8 high-level and low-level consumer APIs。<a href="https://kafka.apache.org/090/documentation.html#newconsumerapi。但还是可以用0.8之前的low" target="_blank" rel="external">https://kafka.apache.org/090/documentation.html#newconsumerapi。但还是可以用0.8之前的low</a> level API，在0.10之后则官方doc连low level提也不提。可见high level API将渐渐成为开发者唯一操作接口。</p>
</blockquote>
<ul>
<li>Hight Level Consumer高级API提供了一个从Kafka消费数据的高层抽象，消费者客户端代码不需要管理offset的提交，并且采用了消费组的自动负载均衡功能，确保消费者的增减不会影响消息的消费；</li>
<li>Low Level Consumer低级API通常针对特殊的消费逻辑（比如消费者只想要消费某些特定的Partition），低级API的客户端代码需要自己实现一些和Kafka服务端相关的底层逻辑，比如选择Partition的Leader，处理Leader的故障转移等。</li>
</ul>
<h2 id="磁盘存储特点"><a href="#磁盘存储特点" class="headerlink" title="磁盘存储特点"></a>磁盘存储特点</h2><p>Kafka使用磁盘进行数据的存储，默认有效期为7天，而不是采用内存，主要好处有：</p>
<blockquote>
<ul>
<li>磁盘缓存由Linux系统维护，减少了程序员的不少工作。</li>
<li>磁盘顺序读写速度超过内存随机读写。</li>
<li>JVM的GC效率低，内存占用大,使用磁盘可以避免这一问题。</li>
<li>系统冷启动后，磁盘缓存依然可用。<br><a href="http://blog.csdn.net/endlu/article/details/51392905" target="_blank" rel="external">http://blog.csdn.net/endlu/article/details/51392905</a></li>
</ul>
</blockquote>
<h1 id="zookeeper"><a href="#zookeeper" class="headerlink" title="zookeeper"></a>zookeeper</h1><p>ZooKeeper是以Fast Paxos算法为基础，实现同步服务，配置维护和命名服务等分布式应用。对于Zookeeper集群而言，设定有2n+1台server，只要有n+1台依然能运行，就可以使用，继续提供服务。</p>
<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># 集群配置，3台机器，2888为Leader服务端口，3888为选举时所用的端口</div><div class="line">server.1=cu01:2888:3888</div><div class="line">server.2=cu02:2888:3888</div><div class="line">server.3=cu03:2888:3888</div></pre></td></tr></table></figure>
<h2 id="数据模型"><a href="#数据模型" class="headerlink" title="数据模型"></a>数据模型</h2><p>zookeeper 会维护一个具有层次关系的数据结构，它非常类似于一个标准的文件系统：</p>
<center><br><img src="https://www.ibm.com/developerworks/cn/opensource/os-cn-zookeeper/image001.gif" alt="此处输入图片的描述"><br></center>

<ul>
<li>概念<ul>
<li>znode: 每个目录项称为znode;</li>
<li>zookeeper 的客户端和服务器通信采用长连接方式，每个客户端和服务器通过心跳来保持连接，这个连接状态称为 session，如果 znode 是临时节点，这个 session 失效，znode 也就删除了；</li>
<li>znode 是有版本的，每个znode中存储的数据可以有多个版本，也就是一个访问路径中可以存储多份数据。</li>
</ul>
</li>
<li>四种形式的目录节点(String create()的createMode选项)<ul>
<li>PERSISTENT：持久化目录节点，这个目录节点存储的数据不会丢失；</li>
<li>PERSISTENT_SEQUENTIAL：顺序自动编号的目录节点，这种目录节点会根据当前已经存在的节点数自动加 1，然后返回给客户端已经成功创建的目录节点名；</li>
<li>EPHEMERAL：临时目录节点，一旦创建这个节点的客户端与服务器端口也就是 session 超时，这种节点会被自动删除；</li>
<li>EPHEMERAL_SEQUENTIAL：临时自动编号节点。</li>
</ul>
</li>
</ul>
<h2 id="zookeeper结构"><a href="#zookeeper结构" class="headerlink" title="zookeeper结构"></a>zookeeper结构</h2><ul>
<li>角色<ul>
<li>Leader<br>作为整个ZooKeeper集群的主节点，负责响应所有对ZooKeeper<br><strong>状态变更的请求</strong>。它会将每个状态更新请求进行排序和编号，以便保证整个集群内部消息处理的FIFO。</li>
<li>Follower<br>响应本服务器上的读请求外，follower还要处理leader的提议，并在leader提交该提议时在本地也进行提交。leader和follower构成ZooKeeper集群的法定人数，也就是说，只有他们才参与新leader的选举、响应leader的提议。</li>
<li>Observer<br>observer服务器用于提高读取的吞吐量。Observer和Follower比较相似，只有一些小区别：首先observer不属于法定人数，即不参加选举也不响应提议；其次是observer不需要将事务持久化到磁盘，一旦observer被重启，需要从leader重新同步整个名字空间。</li>
</ul>
</li>
<li>节点状态<br>每个集群中的节点都有一个状态LOOKING,FOLLOWING,LEADING,OBSERVING，每个节点启动的时候都是LOOKING状态，如果这个节点参与选举但最后不是leader，则状态是FOLLOWING，如果不参与选举则是OBSERVING，leader的状态是LEADING。</li>
</ul>
<h2 id="选取Leader的过程"><a href="#选取Leader的过程" class="headerlink" title="选取Leader的过程"></a>选取Leader的过程</h2><ul>
<li>专有概念<ul>
<li>zxid：每个ZooKeeper服务器保存在磁盘的事务id,在初始阶段，每台服务器的这个值都是自己的id(高32位是epoch，低32位用于递增计数)；</li>
<li>epoch：逻辑时钟的值，每次选举leader这个值会加1;用来标识leader关系是否改变，每次一个leader被选出来，它都会有一个新的epoch，标识当前属于那个leader的统治时期。</li>
</ul>
</li>
<li>Zk的选举算法有两种<br>一种是基于basic paxos实现的,另外一种是基于fast paxos算法实现的。系统默认的选举算法为fast paxos。<ul>
<li><strong>Basic paxos：</strong><ul>
<li>当前Server发起选举的线程担任选举线程，其主要功能是对投票结果进行统计，并选出推荐的Server；</li>
<li>选举线程首先向所有Server发起一次询问(包括自己)；</li>
<li>选举线程收到回复后，验证是否是自己发起的询问(验证zxid是否一致)，然后获取对方的id(myid)，并存储到当前<strong>询问对象列表</strong>中，最后获取对方提议的leader相关信息(id,zxid)，并将这些信息存储到当次选举的<strong>投票记录表</strong>中；</li>
<li>收到<strong>所有Server</strong>回复以后，就计算出zxid最大的那个Server，并将这个Server相关信息设置成下一次要投票的Server。在收集齐的过程中，可能有个别server网络好，就更新了自己要选的那个server；</li>
<li>如果此时获胜的Server获得n/2+1的Server票数，<strong>设置当前推荐的leader为获胜的Server</strong>，将根据获胜的Server相关信息设置自己的状态，否则，继续这个过程，直到leader被选举出来。</li>
</ul>
</li>
<li><strong>Fast Paxos：</strong><ul>
<li>每个Server会发出一个投票。初始情况，将自己作为Leader服务器来进行投票。每次投票包含的基本的元素包括：所推举的服务器的myid和ZXID,以(myid，ZXID)的形式来表示。因为是初始化阶段，因此无论是Server1还是Server2，都会投给自己，即Server1的投票为(1，0)，Server2的投票为(2,0)，然后各自将这个投票发给集群中其他所有机器。</li>
<li>接收来自各个服务器的投票<br>每个服务器都会接收来自其他服务器的投票。集群中的每个服务器在接收到投票后，首先会判断该投票的有效性，包括检査是否是本轮投票、是否来自LOOKING 状态的服务器。</li>
<li>处理投票<br>在接收到来自其他服务器的投票后，服务器都需要将别人的投票和自己的投票进行PK：</li>
</ul>
<ol>
<li>优先检査Epoch，Epoch高的作为Leader。</li>
<li>在检査ZXID。ZXID比较大的服务器优先作为Leader。</li>
<li>如果Epoch、ZXID相同的话，那么就比较myid。myid比较大的服务器作为Leader服务器。</li>
</ol>
<ul>
<li>对于Server1来说，它自己的投票是(1，0)，而接收到的投票为(2,0)。首先会对比两者的Epoch，我们假设两个的Epoch相同，再比较ZXID，因为都是0,所以无法决定谁是Leader。接下来会对比两者的myid，很显然，Server1发现接收到的投票中的myid是2,大于自id，于是就会更新自己的投票为(2,0)，然后重新将投票发出去。而对于Server2来说，不需要更新自己的投票信息。</li>
<li>统计投票。<br>毎次投票后，服务器都会统计所有投票，判断是否已经有过半的机器接收到相同的投票信息。有的话，<strong>设置当前推荐的leader为获胜的Server</strong>，将根据获胜的Server相关信息设置自己的状态，否则，继续这个过程，直到leader被选举出来。</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li>选完leader以后，zk就进入状态同步过程。</li>
</ul>
<ol>
<li>leader等待server连接；</li>
<li>Follower连接leader，将<strong>最大的zxid</strong>发送给leader；</li>
<li>Leader根据follower的zxid确定同步点；</li>
<li>完成同步后通知follower 已经成为uptodate状态；</li>
<li>Follower收到uptodate消息后，又可以重新接受client的请求进行服务了。</li>
</ol>
<h2 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h2><p>ZooKeeper主要是用来维护和监控一个目录节点树中存储的数据的状态，所有操作ZooKeeper和操作目录节点树大体一样，如</p>
<ul>
<li>创建一个目录节点；</li>
<li>给某个目录节点设置数据；</li>
<li>获取某个目录节点的所有子目录节点；</li>
<li>给某个目录节点设置权限和监控这个目录节点的状态变化。</li>
</ul>
<p>Zookeeper 从设计模式角度来看，是一个基于观察者模式设计的分布式服务管理框架，然后接受观察者的注册，一旦这些数据的状态发生变化，Zookeeper就将负责通知已经在Zookeeper上注册的那些观察者做出相应的反应，从而实现集群中类似 Master/Slave 管理模式：</p>
<ul>
<li>统一命名服务（Name Service）：分布式中统一命名；</li>
<li>配置管理（Configuration Management）：软件运行中可动态修改配置；</li>
<li>集群管理（Group Membership）：选出一个“总管”知道当前集群每台机器的服务状态，涉及zookeeper中Leader Election的功能；<blockquote>
<p>Zookeeper实现 Leader Election，也就是选出一个 Master Server。普通监听：每台 Server 创建一个 EPHEMERAL 目录节点，并<strong>调用父目录节点getChilden监听</strong>，此时不同的是它还是一个SEQUENTIAL 目录节点，所以它是个 EPHEMERAL_SEQUENTIAL目录节点。之所以它是 EPHEMERAL_SEQUENTIAL 目录节点，是因为可以给每台 Server 编号，可以选择当前最小编号的 Server 为 Master，假如这个最小编号的 Server 死去，由于是 EPHEMERAL 节点，死去的 Server 对应的节点也被删除，所以当前的节点列表中又出现一个最小编号的节点，我们就选择这个节点为当前 Master。这样就实现了动态选择 Master，避免了传统意义上单 Master 容易出现单点故障的问题。</p>
</blockquote>
</li>
<li>共享锁：要获得锁的server创建EPHEMERAL_SEQUENTIAL目录节点，对父节点getChilden判断当前server编号是否是同级最小编号，是就获得了锁，释放就删除；</li>
<li>创建同步队列（用得较少）：通过不断增加目录，增加时到没到数目，到了就创建一个监控标志位目录（xx/start），各个节点监听到有这个节点就触发监听程序，然后移除成员，不到就继续等待。</li>
</ul>
<h1 id="HBase"><a href="#HBase" class="headerlink" title="HBase"></a>HBase</h1><p>(注：Zookeeper的引入使得Master不再是单点故障)</p>
<h2 id="HBase主要优点"><a href="#HBase主要优点" class="headerlink" title="HBase主要优点"></a>HBase主要优点</h2><ul>
<li><p>高效的储存空间利用率<br>传统的行式数据库由于每个列的长度不一，为了预防更新的时候不至于出现一行数据(没值的字段需要补值)跳到另一个block上去，所以往往会预留一些空间。而面向列的数据库由于一开始就完全为分析而存在，不需要考虑少量的更新问题，所以数据完全是密集储存的。</p>
</li>
<li><p>不可见索引<br>在已经读取了可能的数据块之后，对于类似age &lt; 65或job=’Axx’的，列式数据库并不需要扫描完整个block，因为数据已经排序了。如果读到第一个age=66或者Job=‘Bxx’的时候就会停止扫描了。这相当与行式数据库索引里的范围扫描。</p>
</li>
<li><p>压缩算法<br>列式数据库由于其每一列都是分开储存的。所以很容易针对每一列的特征运用不同的压缩算法。</p>
</li>
<li><p>延迟物化<br>列式数据库由于其特殊的执行引擎，在数据中间过程运算的时候一般不需要解压数据而是以指针代替运算，直到最后需要输出完整的数据时才解压缩。</p>
</li>
</ul>
<h2 id="列式数据库特点"><a href="#列式数据库特点" class="headerlink" title="列式数据库特点"></a>列式数据库特点</h2><ul>
<li>优点<ul>
<li>极高的装载速度（最高可以等于所有硬盘IO的总和，基本是极限了）</li>
<li>适合大量的数据而不是小数据</li>
<li>实时加载数据仅限于增加（删除和更新需要解压缩Block然后计算然后重新压缩储存）</li>
<li>高效的压缩率，不仅节省储存空间也节省计算内存和CPU。</li>
<li>非常适合做聚合操作。 　　</li>
</ul>
</li>
<li>缺点<ul>
<li>不适合扫描小量数据</li>
<li>不适合随机的更新</li>
<li>批量更新情况各异，有的优化的比较好的列式数据库（比如Vertica）表现比较好，有些没有针对更新的数据库表现比较差。 不适合做含有删除和更新的实时操作</li>
</ul>
</li>
</ul>
<h2 id="物理模型"><a href="#物理模型" class="headerlink" title="物理模型"></a>物理模型</h2><ul>
<li>每个column family存储在HDFS上的一个单独文件中，空值不会被保存；</li>
<li>Table在行的方向上分割为多个Region，Region按大小分割的，每个表开始只有一个region，随着数据增多，region不断增大，当增大到一个阀值的时候，region就会等分会两个新region，之后会有越来越多的region；</li>
<li><p>Region是Hbase中分布式存储和负载均衡的最小单元（最小存储单元是store——对应一个columnfamily），不同Region分布到不同RegionServer上。</p>
<center><br><img src="http://img.blog.csdn.net/20131226173700718?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvd29zaGl3YW54aW4xMDIyMTM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="此处输入图片的描述"><br></center>
</li>
<li><p>Master</p>
<ul>
<li>为Region server分配region；</li>
<li>负责Region server的负载均衡；</li>
<li>发现失效的Region server并重新分配其上的region；</li>
<li>管理用户对table的增删改查操作；</li>
</ul>
</li>
<li>因此，无Master过程中：<ul>
<li>数据读取仍照常进行；</li>
<li>region切分、负载均衡等无法进行；</li>
</ul>
</li>
</ul>
<h2 id="HBase的compact"><a href="#HBase的compact" class="headerlink" title="HBase的compact"></a>HBase的compact</h2><p>HFile数量过多会降低读性能。为了避免对读性能的影响，可以对这些HFile(<strong>Store中的Storefile</strong>)进行compact操作，把多个HFile合并成一个HFile。compact操作需要对HBase的数据进行多次的重新读写，因此这个过程会产生大量的IO。因此compact操作的本质就是以IO操作换取后续的读性能的提高。</p>
<p>HBase的compact是针对HRegion的HStore进行操作的。compact操作分为major和minor两种：</p>
<ul>
<li>major会把HStore所有的HFile都compact为一个HFile，并同时忽略标记为delete的KeyValue（被删除的KeyValue只有在compact过程中才真正被”删除”），可以想象major会产生大量的IO操作，对HBase的读写性能产生影响。</li>
<li>minor则只<strong>会选择数个HFile文件</strong>compact为一个HFile，minor的过程一般较快，而且IO相对较低。在日常任务时间，都会禁止major操作，只在空闲的时段定时执行。<center><br><img src="http://img.blog.csdn.net/20131226173618000?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvd29zaGl3YW54aW4xMDIyMTM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="此处输入图片的描述"><br></center>

</li>
</ul>
<h2 id="读写性能讨论"><a href="#读写性能讨论" class="headerlink" title="读写性能讨论"></a>读写性能讨论</h2><ul>
<li>HBase的写入速度快是因为它其实并不是真的立即写入文件中，而是先写入内存，随后异步刷入HFile。所以在客户端看来，写入速度很快。另外，写入时候将随机写入转换成顺序写，数据写入速度也很稳定。因此，用户写操作只需要进入到内存即可立即返回，从而保证I/O高性能。</li>
<li>读取速度快是因为它使用了LSM树型结构。LSM树原理把一棵大树拆分成N棵小树，它首先写入内存中，随着小树越来越大，内存中的小树会flush到磁盘中，磁盘中的树定期可以做merge操作，合并成一棵大树，以优化读性能。LSM树实际上是牺牲了部分读性能，用来大幅提高写性能。</li>
<li>磁盘的顺序读取速度很快，但是相比而言，寻找磁道的速度就要慢很多。HBase的存储结构导致它需要磁盘寻道时间在可预测范围内，并且读取与所要查询的rowkey连续的任意数量的记录都不会引发额外的寻道开销。比如有5个存储文件，那么假设要到HFile中读取数据，最多需要5次磁盘寻道就可以。<br>HBase读取首先会在缓存（BlockCache）中查找，它采用了LRU（最近最少使用算法），如果缓存中没找到，会从内存中的MemStore中查找，只有这两个地方都找不到时，才会加载HFile中的内容。<br>在HFile中保存的内容是有序的，当数据写入HFile后，内存中的数据会被丢弃。HFile文件为磁盘顺序读取做了优化，按页存储。因此，读取HFile速度也会很快，因为节省了寻道开销。<br>而关系型数据库，即使有索引，也无法确定磁盘寻道次数。</li>
</ul>
<h2 id="与zookeeper的关系"><a href="#与zookeeper的关系" class="headerlink" title="与zookeeper的关系"></a>与zookeeper的关系</h2><p>-ROOT-和.META.是HBase的两张内置表，从存储结构和操作方法的角度来说，它们和其他HBase的表没有任何区别，你可以认为这就是两张普通的表，对于普通表的操作对它们都适用。它们与众不同的地方是HBase用它们来存贮一个重要的系统信息——<strong>Region的分布情况</strong>以及<strong>每个Region的详细信息</strong>。</p>
<center><br><img src="http://img.blog.csdn.net/20131226174043000?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvd29zaGl3YW54aW4xMDIyMTM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="此处输入图片的描述"><br></center>

<p>参考：<a href="http://blog.csdn.net/woshiwanxin102213/article/details/17584043" target="_blank" rel="external">http://blog.csdn.net/woshiwanxin102213/article/details/17584043</a></p>
<h2 id="调优"><a href="#调优" class="headerlink" title="调优"></a>调优</h2><p>更多：<a href="http://www.cnblogs.com/shitouer/archive/2012/08/07/2626377.html" target="_blank" rel="external">http://www.cnblogs.com/shitouer/archive/2012/08/07/2626377.html</a></p>
<p>hbase中hfile（storefile）的默认最大值(hbase.hregion.max.filesize)是256MB，而google的bigtable论文中对tablet的最大值也推荐为100-200MB，这个大小有什么秘密呢？<br>　　众所周知hbase中数据一开始会写入memstore，当memstore满64MB以后，会flush到disk上而成为storefile。当storefile数量超过3时，会启动compaction过程将它们合并为一个storefile。这个过程中会删除一些timestamp过期的数据，比如update的数据。而当合并后的storefile大小大于hfile默认最大值时，会触发split动作，将它切分成两个region。<br>　　链接中作者声明进行了持续insert压力测试，并设置了不同的hbase.hregion.max.filesize，根据结果得到如下结论：</p>
<ul>
<li>值越小，平均吞吐量越大，但吞吐量越不稳定；</li>
<li>值越大，平均吞吐量越小，吞吐量不稳定的时间相对更小。</li>
</ul>
<p><strong>为什么会这样呢？推论如下：</strong></p>
<ul>
<li>当hbase.hregion.max.filesize较小时，触发split的机率更大，而split的时候会将region offline，因此在split结束的时间前，访问该region的请求将被block住，客户端自我block的时间默认为1s。当大量的region同时发生split时，系统的整体访问服务将大受影响。因此容易出现吞吐量及响应时间的不稳定现象</li>
<li>当hbase.hregion.max.filesize比较大时，单个region中触发split的机率较小，大量region同时触发split的机率也较小，因此吞吐量较之小hfile尺寸更加稳定些。但是由于长期得不到split，因此同一个region内发生多次compaction的机会增加了。compaction的原理是将原有数据读一遍并重写一遍到hdfs上，然后再删除原有数据。无疑这种行为会降低以io为瓶颈的系统的速度，因此平均吞吐量会受到一些影响而下降。</li>
</ul>
<p>综合以上两种情况，hbase.hregion.max.filesize不宜过大或过小，256MB或许是一个更理想的经验参数。对于离线型的应用，调整为128MB会更加合适一些，而在线应用除非对split机制进行改造，否则不应该低于256MB。</p>
<h2 id="rowkey设计原则"><a href="#rowkey设计原则" class="headerlink" title="rowkey设计原则"></a>rowkey设计原则</h2><ul>
<li><p>长度原则<br>Rowkey的长度被很多开发者建议说设计在10~100个字节，不过建议是越短越好，不要超过16个字节。<br>原因如下：</p>
<ul>
<li>数据的持久化文件HFile中是按照KeyValue存储的，如果Rowkey过长比如100个字节，1000万列数据光Rowkey就要占用100*1000万=10亿个字节，将近1G数据，这会极大影响HFile的存储效率；</li>
<li>MemStore将缓存部分数据到内存，如果Rowkey字段过长内存的有效利用率会降低，系统将无法缓存更多的数据，这会降低检索效率。因此Rowkey的字节长度越短越好。</li>
<li>目前操作系统是都是64位系统，内存8字节对齐。控制在16个字节，8字节的整数倍利用操作系统的最佳特性。</li>
</ul>
</li>
<li><p>散列原则</p>
<ul>
<li>如果Rowkey是按时间戳的方式递增，不要将时间放在二进制码的前面，建议将Rowkey的高位作为散列字段，由程序循环生成，低位放时间字段，这样将提高数据均衡分布在每个Regionserver实现负载均衡的几率。</li>
<li>如果没有散列字段，首字段直接是时间信息将产生所有新数据都在一个 RegionServer上堆积的热点现象，这样在做数据检索的时候负载将会集中在个别RegionServer，降低查询效率。</li>
</ul>
</li>
</ul>
<h2 id="hbase-shell操作"><a href="#hbase-shell操作" class="headerlink" title="hbase shell操作"></a>hbase shell操作</h2><h3 id="delete操作"><a href="#delete操作" class="headerlink" title="delete操作"></a>delete操作</h3><ul>
<li>每个记录有个保存于memstore的记录，在持久化前，记录新旧程度的”ts”<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">put &apos;key&apos;, &apos;value&apos;, ts=1</div><div class="line">put &apos;key&apos;, &apos;value&apos;, ts=2</div><div class="line">del &apos;key&apos;, &apos;value&apos;, ts=3</div></pre></td></tr></table></figure>
</li>
</ul>
<p>如上所示，进行两次put操作再加一次delete操作，合并后，就只有delete的操作了。</p>
<ul>
<li>Hbase有一个TTL(time to live)，可以标识数据的有效期，比如，可以把TTL设置成86400*1000，也就是说数据将于1天后过期。这是一个表级的设置，必须在建表时指定。本质上也是利用ts(timestamp)进行比较，当前ts与put之后的ts进行比较，若大于TTL则删除。注意，ts可人工改，要谨慎，不然太大就表示该记录长时间有效，影响正常操作。</li>
</ul>
<h3 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># create [tableName],[family1],&lt;family2&gt;,...,&lt;familyN   &gt;</div><div class="line">create &apos;t1&apos;,&apos;f1&apos;</div></pre></td></tr></table></figure>
<h3 id="添加数据"><a href="#添加数据" class="headerlink" title="添加数据"></a>添加数据</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">put &lt;table&gt;,&lt;rowkey&gt;,&lt;family:column&gt;,&lt;value&gt;,&lt;timestamp&gt;</div></pre></td></tr></table></figure>
<p>e.g.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hbase(main):003:0&gt; put &apos;t1&apos;,&apos;rowkey001&apos;,&apos;f1:col1&apos;,&apos;value01&apos;</div></pre></td></tr></table></figure></p>
<h3 id="查找数据"><a href="#查找数据" class="headerlink" title="查找数据"></a>查找数据</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">get &lt;table&gt;,&lt;rowkey&gt;,[&lt;family:column&gt;,....]</div></pre></td></tr></table></figure>
<p>e.g.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hbase(main)&gt; get &apos;t1&apos;,&apos;rowkey001&apos;, &apos;f1:col1&apos;</div></pre></td></tr></table></figure></p>
<h3 id="扫描表数据"><a href="#扫描表数据" class="headerlink" title="扫描表数据"></a>扫描表数据</h3><p>如下，获取前五条rowkey相对应的数据：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">hbase(main):017:0&gt; scan &apos;FeatureIndex0.01_v2&apos;,&#123;LIMIT=&gt;5&#125;</div><div class="line">ROW                                              COLUMN+CELL</div><div class="line"> 0@1|0@0                                         column=label:avg, timestamp=1483110072314, value=0.0554465387563</div><div class="line"> 0@1|0@0                                         column=label:stddev, timestamp=1483110072314, value=0.228849788944</div><div class="line"> 0@1|0@0                                         column=label:sum, timestamp=1483110072314, value=500383.0</div><div class="line"> 0@1|0@1                                         column=label:avg, timestamp=1483110072312, value=0.0510849704785</div><div class="line"> 0@1|0@1                                         column=label:stddev, timestamp=1483110072312, value=0.220171615499</div><div class="line"> 0@1|0@1                                         column=label:sum, timestamp=1483110072312, value=10149.0</div><div class="line"> 0@1|1@0                                         column=label:avg, timestamp=1483110072323, value=0.0442181954694</div><div class="line"> 0@1|1@0                                         column=label:stddev, timestamp=1483110072323, value=0.20557989582</div><div class="line"> 0@1|1@0                                         column=label:sum, timestamp=1483110072323, value=12721.0</div><div class="line"> 100@101|0@0                                     column=label:avg, timestamp=1483110244726, value=0.0549538811079</div><div class="line"> 100@101|0@0                                     column=label:stddev, timestamp=1483110244726, value=0.227890231369</div><div class="line"> 100@101|0@0                                     column=label:sum, timestamp=1483110244726, value=519447.0</div><div class="line"> 100@101|0@1                                     column=label:avg, timestamp=1483110244726, value=0.061603404489</div><div class="line"> 100@101|0@1                                     column=label:stddev, timestamp=1483110244726, value=0.240437952631</div><div class="line"> 100@101|0@1                                     column=label:sum, timestamp=1483110244726, value=1795.0</div><div class="line">5 row(s) in 0.1300 seconds</div></pre></td></tr></table></figure></p>
<h3 id="删除表"><a href="#删除表" class="headerlink" title="删除表"></a>删除表</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">truncate &lt;table&gt;</div><div class="line"># 其具体过程是：disable table -&gt; drop table -&gt; create table</div></pre></td></tr></table></figure>
<h1 id="Lambda架构"><a href="#Lambda架构" class="headerlink" title="Lambda架构"></a>Lambda架构</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">batch view = <span class="function"><span class="keyword">function</span>(<span class="params">all data</span>)</span></div><div class="line"><span class="title">realtime</span> <span class="title">view</span> = <span class="title">function</span>(<span class="params">realtime view, new data</span>)</div><div class="line"><span class="title">query</span> = <span class="title">function</span>(<span class="params">batch view, realtime view</span>)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">batchview = function(all data)；</div><div class="line">query = function(batch view)。</div></pre></td></tr></table></figure>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">


    <div class="bdsharebuttonbox">
    <a href="#" class="bds_more" data-cmd="more">分享到：</a>
    <a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间">QQ空间</a>
    <a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博">新浪微博</a>
    <a href="#" class="bds_tqq" data-cmd="tqq" title="分享到腾讯微博">腾讯微博</a>
    <a href="#" class="bds_renren" data-cmd="renren" title="分享到人人网">人人网</a>
    <a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信">微信</a>
</div>
<script>
window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"16"},"share":{"bdSize":16}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script>
<style>
    .bdshare_popup_box {
        border-radius: 4px;
        border: #e1e1e1 solid 1px;
    }
    .bdshare-button-style0-16 a,
    .bdshare-button-style0-16 .bds_more {
        padding-left: 20px;
        margin: 6px 10px 6px 0;
    }
    .bdshare_dialog_list a,
    .bdshare_popup_list a,
    .bdshare_popup_bottom a {
        font-family: 'Microsoft Yahei';
    }
    .bdshare_popup_top {
        display: none;
    }
    .bdshare_popup_bottom {
        height: auto;
        padding: 5px;
    }
</style>


</div>

            
    
        <a href="http://enjoyhot.github.io/2017/04/30/Apache大数据组件/#comments" class="article-comment-link ds-thread-count" data-thread-key="http://enjoyhot.github.io/2017/04/30/Apache大数据组件/">Comments</a>
    

        </footer>
    </div>
    
        
<nav id="article-nav">
    
    
        <a href="/2017/04/30/Spark计算平台/" id="article-nav-older" class="article-nav-link-wrap">
            <strong class="article-nav-caption">Older</strong>
            <div class="article-nav-title">Spark计算平台</div>
        </a>
    
</nav>


    
</article>


    
    <section id="comments">
    
        
    <div class="ds-thread" data-thread-key="2017/04/30/Apache大数据组件/" data-title="Apache大数据组件" data-url="http://enjoyhot.github.io/2017/04/30/Apache大数据组件/"></div>
    <style>
        #ds-thread #ds-reset .ds-textarea-wrapper {
            background: none;
        }
        #ds-reset .ds-avatar img {
            box-shadow: none;
        }
        #ds-reset .ds-gradient-bg {
            background: #f7f7f7;
        }
        #ds-thread #ds-reset li.ds-tab a {
            border-radius: 3px;
        }
        #ds-thread #ds-reset .ds-post-button {
            color: white;
            border: none;
            box-shadow: none;
            background: #d32;
            text-shadow: none;
            font-weight: normal;
            font-family: 'Microsoft Yahei';
        }
        #ds-thread #ds-reset .ds-post-button:hover {
            color: white;
            background: #DE594C;
        }
        #ds-thread #ds-reset .ds-post-button:active {
            background: #d32;
        }
        #ds-smilies-tooltip ul.ds-smilies-tabs li a.ds-current {
            color: white;
            background: #d32;
            box-shadow: none;
            text-shadow: none;
            font-weight: normal;
        }
    </style>

    
    </section>

</section>
            
                <aside id="sidebar">
   
        
    <div class="widget-wrap">
        <h3 class="widget-title">recent</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2017/04/30/Apache大数据组件/" class="thumbnail">
    
    
        <span style="background-image:url(http://www.processon.com/chart_image/535371590cf2bb589c5e2391.png)" alt="Apache大数据组件" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/分布式/">分布式</a></p>
                            <p class="item-title"><a href="/2017/04/30/Apache大数据组件/" class="title">Apache大数据组件</a></p>
                            <p class="item-date"><time datetime="2017-04-30T09:24:08.000Z" itemprop="datePublished">2017-04-30</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2017/04/30/Spark计算平台/" class="thumbnail">
    
    
        <span style="background-image:url(http://spark.apache.org/docs/latest/img/cluster-overview.png)" alt="Spark计算平台" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Spark/">Spark</a></p>
                            <p class="item-title"><a href="/2017/04/30/Spark计算平台/" class="title">Spark计算平台</a></p>
                            <p class="item-date"><time datetime="2017-04-30T09:23:09.000Z" itemprop="datePublished">2017-04-30</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2017/04/30/Java高级篇/" class="thumbnail">
    
    
        <span style="background-image:url(http://img.blog.csdn.net/20150720152805765?%20%20watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/grav%20%20ity/Center)" alt="Java高级篇" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Java/">Java</a></p>
                            <p class="item-title"><a href="/2017/04/30/Java高级篇/" class="title">Java高级篇</a></p>
                            <p class="item-date"><time datetime="2017-04-30T09:21:09.000Z" itemprop="datePublished">2017-04-30</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2017/04/30/Java基础篇/" class="thumbnail">
    
    
        <span style="background-image:url(http://hi.csdn.net/attachment/201103/15/0_1300176759Dsv5.gif)" alt="Java基础篇" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Java/">Java</a></p>
                            <p class="item-title"><a href="/2017/04/30/Java基础篇/" class="title">Java基础篇</a></p>
                            <p class="item-date"><time datetime="2017-04-30T09:20:09.000Z" itemprop="datePublished">2017-04-30</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2017/04/29/linux-management-command/" class="thumbnail">
    
    
        <span style="background-image:url(http://enjoyhot.github.io/img/article_pic/201608/080101.jpg)" alt="Linux 系统管理常用命令（不定时更新）" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Linux/">Linux</a></p>
                            <p class="item-title"><a href="/2017/04/29/linux-management-command/" class="title">Linux 系统管理常用命令（不定时更新）</a></p>
                            <p class="item-date"><time datetime="2017-04-29T09:23:09.000Z" itemprop="datePublished">2017-04-29</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">categories</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Basis/">Basis</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Database/">Database</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Django/">Django</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Git/">Git</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/HPC/">HPC</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/">JavaScript</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Life/">Life</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Machine-Learning/">Machine Learning</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Markdown/">Markdown</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Photo/">Photo</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Search-Engine/">Search Engine</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spark/">Spark</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/tea/">tea</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/分布式/">分布式</a><span class="category-list-count">1</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">archives</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">May 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">April 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">March 2015</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/02/">February 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/01/">January 2015</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">December 2014</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">November 2014</a><span class="archive-list-count">9</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">tags</h3>
        <div class="widget">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/">Android</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Apache/">Apache</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Basis/">Basis</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSDN/">CSDN</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Classifier/">Classifier</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Database/">Database</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Django/">Django</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/">Git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HPC/">HPC</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/">Java</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/">JavaScript</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Life/">Life</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Listview/">Listview</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Machine-Learning/">Machine Learning</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Markdown/">Markdown</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mongoengine/">Mongoengine</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NDK/">NDK</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PageRank/">PageRank</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Photo/">Photo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Pymongo/">Pymongo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python-web/">Python web</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Reflect/">Reflect</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Scrapy/">Scrapy</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Search-Engine/">Search Engine</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spark/">Spark</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spider/">Spider</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ubuntu/">Ubuntu</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/benchmark/">benchmark</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/servlet/">servlet</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tea/">tea</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tomcat/">tomcat</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/virtual-box/">virtual box</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/分布式/">分布式</a><span class="tag-list-count">1</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">tag cloud</h3>
        <div class="widget tagcloud">
            <a href="/tags/Android/" style="font-size: 20px;">Android</a> <a href="/tags/Apache/" style="font-size: 10px;">Apache</a> <a href="/tags/Basis/" style="font-size: 12px;">Basis</a> <a href="/tags/CSDN/" style="font-size: 12px;">CSDN</a> <a href="/tags/Classifier/" style="font-size: 10px;">Classifier</a> <a href="/tags/Database/" style="font-size: 10px;">Database</a> <a href="/tags/Django/" style="font-size: 10px;">Django</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/HPC/" style="font-size: 12px;">HPC</a> <a href="/tags/Java/" style="font-size: 12px;">Java</a> <a href="/tags/JavaScript/" style="font-size: 12px;">JavaScript</a> <a href="/tags/Life/" style="font-size: 18px;">Life</a> <a href="/tags/Linux/" style="font-size: 14px;">Linux</a> <a href="/tags/Listview/" style="font-size: 10px;">Listview</a> <a href="/tags/Machine-Learning/" style="font-size: 16px;">Machine Learning</a> <a href="/tags/Markdown/" style="font-size: 10px;">Markdown</a> <a href="/tags/Mongoengine/" style="font-size: 10px;">Mongoengine</a> <a href="/tags/NDK/" style="font-size: 12px;">NDK</a> <a href="/tags/PageRank/" style="font-size: 12px;">PageRank</a> <a href="/tags/Photo/" style="font-size: 10px;">Photo</a> <a href="/tags/Pymongo/" style="font-size: 10px;">Pymongo</a> <a href="/tags/Python/" style="font-size: 18px;">Python</a> <a href="/tags/Python-web/" style="font-size: 10px;">Python web</a> <a href="/tags/Reflect/" style="font-size: 10px;">Reflect</a> <a href="/tags/Scrapy/" style="font-size: 10px;">Scrapy</a> <a href="/tags/Search-Engine/" style="font-size: 12px;">Search Engine</a> <a href="/tags/Spark/" style="font-size: 10px;">Spark</a> <a href="/tags/Spider/" style="font-size: 16px;">Spider</a> <a href="/tags/Ubuntu/" style="font-size: 10px;">Ubuntu</a> <a href="/tags/benchmark/" style="font-size: 10px;">benchmark</a> <a href="/tags/servlet/" style="font-size: 12px;">servlet</a> <a href="/tags/tea/" style="font-size: 10px;">tea</a> <a href="/tags/tomcat/" style="font-size: 12px;">tomcat</a> <a href="/tags/virtual-box/" style="font-size: 10px;">virtual box</a> <a href="/tags/分布式/" style="font-size: 10px;">分布式</a>
        </div>
    </div>

    
        
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">links</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="http://blog.csdn.net/gugugujiawei">enjoyhot&#39;s CSDN</a>
                    </li>
                
            </ul>
        </div>
    </div>


    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>
            
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2017 enjoyhot<br>
            Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="http://github.com/ppoffice">PPOffice</a>
        </div>
    </div>
</footer>
        
    
    <script type="text/javascript">
    var duoshuoQuery = {short_name:'enjoyhot'};
    (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
    || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
    </script>




    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>
